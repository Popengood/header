!function(){"use strict";const e=document.querySelector(".select-geo"),t=e.querySelector(".arrow"),n=document.getElementById("city"),i=document.querySelector(".city-list"),o=i.querySelectorAll("li");if(e.addEventListener("click",()=>{i.hidden=!i.hidden,t.classList.toggle("rotate")}),i.addEventListener("click",(function(e){const c=e.target;localStorage.city=c.innerHTML,n.innerHTML=c.innerHTML,i.hidden=!0,t.classList.remove("rotate");for(let e of o)e.classList.remove("active"),e==c&&c.classList.add("active")})),localStorage.city){n.innerHTML=localStorage.city;for(let e of o)e.classList.remove("active"),e.innerHTML==localStorage.city&&e.classList.add("active")}const c=document.querySelector(".form");document.getElementById("search").addEventListener("click",()=>{c.classList.toggle("show")})}(),function(){"use strict";const e=document.querySelector(".more"),t=document.getElementById("drop"),n=[];let i=document.documentElement.clientWidth,o="",c=0;function d(i){o=document.querySelector(".main-menu");let c=o.offsetWidth,r=o.querySelectorAll("li"),l=parseInt(getComputedStyle(o,!0).marginLeft),a=document.querySelector(".main-menu-row").offsetWidth+2,s=c+l;if(i){let i=Object.values(r).reduce((e,t)=>e+t.offsetWidth,0),l=n[n.length-1],a=1==n.length?c-i+e.offsetWidth:c-i;if(a<l)return;if(function(){const i=t.querySelectorAll("li")||null;if(0===i.length)return;o.insertBefore(i[0],e),n.pop(),i[0].classList.contains("last-item")?(e.hidden=!0,t.hidden=!0):e.hidden=!1}(),a>=l)return d(1)}else{if(a>=s)return;if(e.hidden=!1,n.push(e.previousElementSibling.clientWidth),t.prepend(e.previousElementSibling),a<s)return d(0)}}window.addEventListener("load",()=>d(0)),window.addEventListener("resize",()=>{clearTimeout(c),c=setTimeout(()=>{let e=document.documentElement.clientWidth,t=e<i?0:1;i=e,d(t)},24)}),e.addEventListener("click",()=>t.hidden=!t.hidden)}(),function(){"use strict";document.documentElement.clientWidth;const e=document.querySelector(".aside-menu-container"),t=document.querySelector(".header-toprow"),n=document.querySelector(".header-menu"),i=document.querySelector(".header-login"),o=document.querySelector(".main-menu-row"),c=document.querySelector(".main-menu"),d=document.getElementById("drop");function r(){e.querySelector(".header-menu")||(e.appendChild(n),n.style.display="flex")}function l(){t.querySelector(".header-menu")||(t.insertBefore(n,i),n.removeAttribute("style"))}function a(){e.querySelector(".main-menu")&&e.querySelector(".city-list")||(e.appendChild(c),e.appendChild(d),c.style.display="flex",d.hidden=!1)}function s(){o.querySelector(".main-menu")&&o.querySelector(".city-list")||(o.append(c),o.append(d),c.removeAttribute("style"),d.hidden=!0)}window.addEventListener("load",()=>{window.matchMedia("(max-width: 960px)").matches?r():l(),window.matchMedia("(max-width: 414px)").matches?a():s()}),window.addEventListener("resize",()=>{window.matchMedia("(max-width: 960px)").matches?r():l(),window.matchMedia("(max-width: 414px)").matches?a():s()});const u=document.querySelector(".overlay"),m=document.querySelector(".aside-menu"),y=document.querySelector("[data-open]"),h=document.querySelectorAll("[data-close]");y.addEventListener("click",(function(){u.classList.remove("fade-out"),u.classList.add("fade-in"),m.style.left="0"}));for(let e of h)e.addEventListener("click",f);function f(){m.removeAttribute("style"),u.classList.remove("fade-in"),u.classList.add("fade-out")}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZ1bmN0aW9uLmpzIl0sIm5hbWVzIjpbInNnIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYXJyb3ciLCJjaXR5IiwiZ2V0RWxlbWVudEJ5SWQiLCJjaXRpZXMiLCJpdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhZGRFdmVudExpc3RlbmVyIiwiaGlkZGVuIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZSIsImVsIiwidGFyZ2V0IiwibG9jYWxTdG9yYWdlIiwiaW5uZXJIVE1MIiwicmVtb3ZlIiwiaXRlbSIsImFkZCIsImZvcm0iLCJtb3JlIiwiZHJvcCIsInNpemVzIiwic2NyZWVuV2lkdGgiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRXaWR0aCIsIm1lbnUiLCJ0bSIsImluaXQiLCJjaCIsIm1lbnVXaWR0aCIsIm9mZnNldFdpZHRoIiwiZWxzIiwibWVudU1hcmdpbiIsInBhcnNlSW50IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsIm1hcmdpbkxlZnQiLCJtZW51Um93IiwidG90YWxXaWR0aCIsImFjY3VtIiwiT2JqZWN0IiwidmFsdWVzIiwicmVkdWNlIiwibGkiLCJsaVdpZHRoIiwibGVuZ3RoIiwicGxhY2UiLCJpbnNlcnRCZWZvcmUiLCJwb3AiLCJjb250YWlucyIsInJldHJhbnNmb3JtIiwicHVzaCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJwcmVwZW5kIiwid2luZG93IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImN1cnJTY3JlZW5XaWR0aCIsImFzaWRlIiwidG9wcm93IiwidG9wbWVudSIsImxvZ2luIiwibWFpbnJvdyIsIm1haW5tZW51IiwiY3JlYXRlQXNpZGVNZW51IiwiYXBwZW5kQ2hpbGQiLCJzdHlsZSIsImRpc3BsYXkiLCJkZXN0cm95QXNpZGVNZW51IiwicmVtb3ZlQXR0cmlidXRlIiwiYWRkQXNpZGVNZW51IiwiZGVzdHJveUFkZEFzaWRlTWVudSIsImFwcGVuZCIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwib3Zl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U0FBVSxLQUM3QitDLE9BQU9tQixXQUFXLHNCQUFzQkMsUUFDM0NWLElBRUFJLElBRUdkLE9BQU9tQixXQUFXLHNCQUFzQkMsUUFDM0NKLElBRUFDLE1BaUNGLE1BQU1JLEVBQVU1RSxTQUFTQyxjQUFjLFlBQ2pDNEUsRUFBWTdFLFNBQVNDLGNBQWMsZUFDbkM2RSxFQUFPOUUsU0FBU0MsY0FBYyxlQUM5QjhFLEVBQVEvRSxTQUFTTyxpQkFBaUIsZ0JBRXhDdUUsRUFBS3RFLGlCQUFpQixTQUt0QixXQUNDb0UsRUFBUWxFLFVBQVVPLE9BQU8sWUFDekIyRCxFQUFRbEUsVUFBVVMsSUFBSSxXQUN0QjBELEVBQVVWLE1BQU1hLEtBQU8sT0FQeEIsSUFBSyxJQUFJbkUsS0FBTWtFLEVBQ2RsRSxFQUFHTCxpQkFBaUIsUUFBU3lFLEdBUTlCLFNBQVNBLElBQ1JKLEVBQVVQLGdCQUFnQixTQUMxQk0sRUFBUWxFLFVBQVVPLE9BQU8sV0FDekIyRCxFQUFRbEUsVUFBVVMsSUFBSSxhQXJGdkIiLCJmaWxlIjoiZnVuY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyI7KGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0Ly8gc2VsZWN0IGNpdHlcclxuXHRjb25zdCBzZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3QtZ2VvJyk7XHJcblx0Y29uc3QgYXJyb3cgPSBzZy5xdWVyeVNlbGVjdG9yKCcuYXJyb3cnKTtcclxuXHRjb25zdCBjaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NpdHknKTtcclxuXHRjb25zdCBjaXRpZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2l0eS1saXN0Jyk7XHJcblx0Y29uc3QgaXRlbXMgPSBjaXRpZXMucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcclxuXHJcblx0c2cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRjaXRpZXMuaGlkZGVuID0gIWNpdGllcy5oaWRkZW47XHJcblx0XHRhcnJvdy5jbGFzc0xpc3QudG9nZ2xlKCdyb3RhdGUnKTtcclxuXHR9KTtcclxuXHRjaXRpZXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGFuZ2VDaXRpZXMpO1xyXG5cclxuXHRpZiAobG9jYWxTdG9yYWdlLmNpdHkpIHtcclxuXHRcdGNpdHkuaW5uZXJIVE1MID0gbG9jYWxTdG9yYWdlLmNpdHk7XHJcblx0XHRmb3IgKGxldCBpdGVtIG9mIGl0ZW1zKSB7XHJcblx0XHRcdGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0XHRcdGlmIChpdGVtLmlubmVySFRNTCA9PSBsb2NhbFN0b3JhZ2UuY2l0eSkge1xyXG5cdFx0XHRcdGl0ZW0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGNoYW5nZUNpdGllcyhlKSB7XHJcblx0XHRjb25zdCBlbCA9IGUudGFyZ2V0O1xyXG5cdFx0bG9jYWxTdG9yYWdlLmNpdHkgPSBlbC5pbm5lckhUTUw7XHJcblx0XHRjaXR5LmlubmVySFRNTCA9IGVsLmlubmVySFRNTDtcclxuXHRcdGNpdGllcy5oaWRkZW4gPSB0cnVlO1xyXG5cdFx0YXJyb3cuY2xhc3NMaXN0LnJlbW92ZSgncm90YXRlJyk7XHJcblxyXG5cdFx0Zm9yIChsZXQgaXRlbSBvZiBpdGVtcykge1xyXG5cdFx0XHRpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdFx0XHRpZiAoaXRlbSA9PSBlbCkgZWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBzaG93IGZvcm1cclxuXHRjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuXHRjb25zdCBzZWFyY2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoJyk7XHJcblxyXG5cdHNlYXJjaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdGZvcm0uY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xyXG5cdH0pO1xyXG59KSgpO1xyXG5cclxuOyhmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGNvbnN0IG1vcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9yZScpO1xyXG5cdGNvbnN0IGRyb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHJvcCcpO1xyXG5cdGNvbnN0IHNpemVzID0gW107XHJcblx0bGV0IHNjcmVlbldpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xyXG5cdGxldCBtZW51ID0gJyc7XHJcblx0bGV0IHRtID0gMDtcclxuXHJcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiBpbml0KDApKTtcclxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG5cdFx0Y2xlYXJUaW1lb3V0KHRtKTtcclxuXHRcdHRtID1zZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0bGV0IGN1cnJTY3JlZW5XaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcclxuXHRcdFx0bGV0IGNoID0gKGN1cnJTY3JlZW5XaWR0aCA8IHNjcmVlbldpZHRoKSA/IDAgOiAxO1xyXG5cdFx0XHRzY3JlZW5XaWR0aCA9IGN1cnJTY3JlZW5XaWR0aDtcclxuXHRcdFx0aW5pdChjaCk7XHJcblx0XHR9LCAyNCk7XHJcblx0fSk7XHJcblxyXG5cdG1vcmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBkcm9wLmhpZGRlbiA9ICFkcm9wLmhpZGRlbik7XHJcblxyXG5cdGZ1bmN0aW9uIGluaXQoY2gpIHtcclxuXHRcdG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi1tZW51Jyk7XHJcblx0XHRsZXQgbWVudVdpZHRoID0gbWVudS5vZmZzZXRXaWR0aDtcclxuXHRcdGxldCBlbHMgPSBtZW51LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJyk7XHJcblx0XHRsZXQgbWVudU1hcmdpbiA9IHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUobWVudSwgdHJ1ZSkubWFyZ2luTGVmdCk7XHJcblx0XHRsZXQgbWVudVJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLW1lbnUtcm93Jykub2Zmc2V0V2lkdGggKyAyO1xyXG5cdFx0bGV0IHRvdGFsV2lkdGggPSBtZW51V2lkdGggKyBtZW51TWFyZ2luO1xyXG5cclxuXHRcdGlmIChjaCkge1xyXG5cdFx0XHRsZXQgYWNjdW0gPSBPYmplY3QudmFsdWVzKGVscykucmVkdWNlKChhY2N1bSwgbGkpID0+IGFjY3VtICsgbGkub2Zmc2V0V2lkdGgsIDApO1xyXG5cdFx0XHRsZXQgbGlXaWR0aCA9IHNpemVzW3NpemVzLmxlbmd0aCAtIDFdO1xyXG5cdFx0XHRsZXQgcGxhY2UgPSAoc2l6ZXMubGVuZ3RoID09IDEpID8gbWVudVdpZHRoIC0gYWNjdW0gKyBtb3JlLm9mZnNldFdpZHRoIDogbWVudVdpZHRoIC0gYWNjdW07XHJcblxyXG5cdFx0XHRpZiAocGxhY2UgPCBsaVdpZHRoKSByZXR1cm47XHJcblx0XHRcdHJldHJhbnNmb3JtKCk7XHJcblx0XHRcdGlmIChwbGFjZSA+PSBsaVdpZHRoKSByZXR1cm4gaW5pdCgxKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlmIChtZW51Um93ID49IHRvdGFsV2lkdGgpIHJldHVybjtcclxuXHRcdFx0dHJhbnNmb3JtKCk7XHJcblx0XHRcdGlmIChtZW51Um93IDwgdG90YWxXaWR0aCkgcmV0dXJuIGluaXQoMCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiB0cmFuc2Zvcm0oKSB7XHJcblx0XHRtb3JlLmhpZGRlbiA9IGZhbHNlO1xyXG5cdFx0c2l6ZXMucHVzaChtb3JlLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuY2xpZW50V2lkdGgpO1xyXG5cdFx0ZHJvcC5wcmVwZW5kKG1vcmUucHJldmlvdXNFbGVtZW50U2libGluZyk7XHJcblx0fVxyXG5cdGZ1bmN0aW9uIHJldHJhbnNmb3JtKCkge1xyXG5cdFx0Y29uc3QgZWxzID0gZHJvcC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpIHx8IG51bGw7XHJcblx0XHRpZiAoZWxzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cdFx0bWVudS5pbnNlcnRCZWZvcmUoZWxzWzBdLCBtb3JlKTtcclxuXHRcdHNpemVzLnBvcCgpO1xyXG5cdFx0aWYgKGVsc1swXS5jbGFzc0xpc3QuY29udGFpbnMoJ2xhc3QtaXRlbScpKSB7XHJcblx0XHRcdG1vcmUuaGlkZGVuID0gdHJ1ZTtcclxuXHRcdFx0ZHJvcC5oaWRkZW4gPSB0cnVlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bW9yZS5oaWRkZW4gPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcbjsoZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRsZXQgc2NyZWVuV2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XHJcblx0Y29uc3QgYXNpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXNpZGUtbWVudS1jb250YWluZXInKTtcclxuXHRjb25zdCB0b3Byb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLXRvcHJvdycpO1xyXG5cdGNvbnN0IHRvcG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLW1lbnUnKTtcclxuXHRjb25zdCBsb2dpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItbG9naW4nKTtcclxuXHRjb25zdCBtYWlucm93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4tbWVudS1yb3cnKTtcclxuXHRjb25zdCBtYWlubWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLW1lbnUnKTtcclxuXHRjb25zdCBkcm9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Ryb3AnKTtcclxuXHJcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcblx0XHRpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDk2MHB4KScpLm1hdGNoZXMpIHtcclxuXHRcdFx0Y3JlYXRlQXNpZGVNZW51KCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRkZXN0cm95QXNpZGVNZW51KCk7XHJcblx0XHR9XHJcblx0XHRpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDQxNHB4KScpLm1hdGNoZXMpIHtcclxuXHRcdFx0YWRkQXNpZGVNZW51KCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRkZXN0cm95QWRkQXNpZGVNZW51KCk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XHJcblx0XHRpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDk2MHB4KScpLm1hdGNoZXMpIHtcclxuXHRcdFx0Y3JlYXRlQXNpZGVNZW51KCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRkZXN0cm95QXNpZGVNZW51KCk7XHJcblx0XHR9XHJcblx0XHRpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDQxNHB4KScpLm1hdGNoZXMpIHtcclxuXHRcdFx0YWRkQXNpZGVNZW51KCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRkZXN0cm95QWRkQXNpZGVNZW51KCk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdGZ1bmN0aW9uIGNyZWF0ZUFzaWRlTWVudSgpIHtcclxuXHRcdGlmIChhc2lkZS5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLW1lbnUnKSkgcmV0dXJuO1xyXG5cdFx0YXNpZGUuYXBwZW5kQ2hpbGQodG9wbWVudSk7XHJcblx0XHR0b3BtZW51LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBkZXN0cm95QXNpZGVNZW51KCkge1xyXG5cdFx0aWYgKHRvcHJvdy5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLW1lbnUnKSkgcmV0dXJuO1xyXG5cdFx0dG9wcm93Lmluc2VydEJlZm9yZSh0b3BtZW51LCBsb2dpbik7XHJcblx0XHR0b3BtZW51LnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGFkZEFzaWRlTWVudSgpIHtcclxuXHRcdGlmIChhc2lkZS5xdWVyeVNlbGVjdG9yKCcubWFpbi1tZW51JykgJiYgYXNpZGUucXVlcnlTZWxlY3RvcignLmNpdHktbGlzdCcpKSByZXR1cm47XHJcblx0XHRhc2lkZS5hcHBlbmRDaGlsZChtYWlubWVudSk7XHJcblx0XHRhc2lkZS5hcHBlbmRDaGlsZChkcm9wKTtcclxuXHRcdG1haW5tZW51LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcblx0XHRkcm9wLmhpZGRlbiA9IGZhbHNlO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBkZXN0cm95QWRkQXNpZGVNZW51KCkge1xyXG5cdFx0aWYgKG1haW5yb3cucXVlcnlTZWxlY3RvcignLm1haW4tbWVudScpICYmIG1haW5yb3cucXVlcnlTZWxlY3RvcignLmNpdHktbGlzdCcpKSByZXR1cm47XHJcblx0XHRtYWlucm93LmFwcGVuZChtYWlubWVudSk7XHJcblx0XHRtYWlucm93LmFwcGVuZChkcm9wKTtcclxuXHRcdG1haW5tZW51LnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcclxuXHRcdGRyb3AuaGlkZGVuID0gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcblx0Y29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5Jyk7XHJcblx0Y29uc3QgYXNpZGVtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFzaWRlLW1lbnUnKTtcclxuXHRjb25zdCBvcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtb3Blbl0nKTtcclxuXHRjb25zdCBjbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNsb3NlXScpO1xyXG5cclxuXHRvcGVuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXNpZGVTaG93KTtcclxuXHRmb3IgKGxldCBlbCBvZiBjbG9zZSkge1xyXG5cdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc2lkZUNsb3NlKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGFzaWRlU2hvdygpIHtcclxuXHRcdG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnZmFkZS1vdXQnKTtcclxuXHRcdG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnZmFkZS1pbicpO1xyXG5cdFx0YXNpZGVtZW51LnN0eWxlLmxlZnQgPSAnMCc7XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGFzaWRlQ2xvc2UoKSB7XHJcblx0XHRhc2lkZW1lbnUucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1x0XHRcclxuXHRcdG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnZmFkZS1pbicpO1xyXG5cdFx0b3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdmYWRlLW91dCcpO1xyXG5cdH1cclxuXHJcblxyXG5cclxuXHJcblxyXG59KSgpOyJdfQ==
